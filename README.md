# Balancer

## Быстрый старт

1. Клонировать репозиторий:
```bash
git clone https://github.com/Wammero/Balancer.git
cd Balancer
```

2. Запустить сервисы:
```bash
docker-compose build
docker-compose up
```  

3. Сервис доступен по адресу:
```
API: http://localhost:8080
```

## Назначение

Load Balancer — сервис, равномерно распределяющий трафик между несколькими backend-сервисами. Список бекендов, на которые будет происходить пересылка трафика, указывается в `.env`.

## Преимущества текущей реализации

1. Архитектурные решения:
   - Использование интерфейсов для ограничения доступа между слоями приложения
   - Четкое разделение ответственности между компонентами
   - Легкость замены реализаций благодаря интерфейсам

2. Производительность:
   - Поддержка высокого RPS за счёт эффективной обработки запросов
   - Использование Redis для кэширования данных снижает нагрузку на базу и ускоряет обработку часто запрашиваемых данных

## Недостатки текущей реализации

1. Большая часть кодовой базы не покрыта тестами:
   - Отсутствуют тесты для большинства бизнес-логики
   - Не протестированы многие обработчики HTTP-запросов
   - Нет тестов для работы с базой данных
   - Отсутствует тестирование граничных случаев

## Структура проекта

- `cmd/loadbalancer` — точка входа в приложение
- `config` — глобальные конфигурационные файлы
- `internal` — основная бизнес-логика приложения:
  - `balancer` — логика балансировки запросов
  - `cache` — работа с кэшем (Redis)
  - `config` — парсинг конфигураций
  - `handler` — HTTP-обработчики
  - `health` — проверка состояния сервисов
  - `limiter` — реализация лимитеров и контроля нагрузки
  - `logger` — логирование
  - `middleware` — промежуточные обработчики (аутентификация)
  - `migration` — работа с миграциями базы данных
  - `models` — структуры данных
  - `repository` — работа с базой данных
  - `router` — настройка роутера
  - `server` — инициализация и запуск HTTP-сервера с безопасным выключением
  - `service` — бизнес-логика
- `migrations` — SQL-миграции
- `pkg` — утилиты и вспомогательные пакеты
- `.env` — файл конфигурации, в котором указывается список backend-серверов
- `Dockerfile`, `docker-compose.yaml` — окружение для запуска через Docker
- `openapi.yaml` — описание API
